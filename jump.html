<html>
<head>
</head>

<body>
  <style>
  
 $card-font-family: Puritan, Helvetica, sans-serif;

body {
  background-color: rebeccapurple;
  font-family: $card-font-family;
}

.app-header {
  display: flex;
  justify-content: space-between;
  flex-wrap: wrap;
  align-items: center;
  margin: 10px;
}

.pokeball {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 50px;
  height: 50px;
  border: 5px solid black;
  border-radius: 50%;
  background-image: linear-gradient(bottom, #ffffff 50%, #ff0000 50%);
  background-image: -o-linear-gradient(bottom, #ffffff 50%, #ff0000 50%);
  background-image: -moz-linear-gradient(bottom, #ffffff 50%, #ff0000 50%);
  background-image: -webkit-linear-gradient(bottom, #ffffff 50%, #ff0000 50%);
  background-image: -ms-linear-gradient(bottom, #ffffff 50%, #ff0000 50%);
  
  .button {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 25%;
    height: 25%;
    background-color: white;
    border: 5px solid black;
    border-radius: 50%;
    
    .button-inner {
      width: 55%;
      height: 55%;
      background-color: black;
      border-radius: 50%;
    }
  }
}

.pokeball:hover {
  animation: wobble 600ms;
}

.random-card-btn {
  padding: 10px 20px;
  border: 4px solid black;
  font-family: $card-font-family;
  font-size: 1.2em;
  background-color: red;
  color: white;
}

.card-container {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
}

.pokemon-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin: 10px 10px;
  width: 220px;
  min-height: 300px;
  border: 1px solid darkgray;
  box-shadow: 3px 3px darkgray;
  background: white;
  
  .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    min-height: 70px;
    width: 100%;
    padding: 0 10px;
    
    h2, div {
      padding: 0 10px;
    }
  }
  
  .pokemon-image {
    display: flex;
    justify-content: center;
    width: 100%;
    min-height: 130px;
    background-color: #bf360c;
  }
  
  .pokemon-info {
    min-height: 18px;
    width: 100%;
    padding: 5px 0;
    margin-bottom: 15px;
    background-color: yellow;
    text-align: center;
  }
  
  .main-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    min-height: 54px;
    width: 100%;
    padding-bottom: 10px;
    
    .national-id {
      padding-left: 10px;
      text-align: center;
    }
    
    .national-id h3,
    .national-id p {
      margin: 5px;
    }
    
    .pokemon-abilities {
      padding-right: 10px;
    }
  }
}
  </style>

<div id="container"></div>

  <script>
  /* Helper functions */

function shuffleArray(o) {
    for (let j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
    return o;
}

function randomNumbers(lowerBound, upperBound, shuffle=true) {
  const numbers = [];
  for (let i = lowerBound; i < upperBound; i++) {
    numbers.push(i);
  }
  return shuffle ? shuffleArray(numbers) : numbers;
}

function convertHectogramsToPounds(weight) {
  if (!isNaN(weight)) {
    return (weight * 0.220462).toFixed(2);
  }
}

/* End helper functions */

class PokemonCard extends React.Component {
  constructor(props) {
    super(props);
    this.state = {pokemon: {}};
    this.getPokemonData();
  }
  
  getPokemonData() {
    const pokemonUrl = `http://pokeapi.co/api/v1/pokemon/${this.props.pokeId}`;
    
    $.get(pokemonUrl).done(data => {
      this.setState({pokemon: data});
      this.getPokemonSprite(data);
    });
  }
  
  getPokemonSprite(pokemonData) {
    const spriteUrl = `http://pokeapi.co/${pokemonData.sprites[0].resource_uri}`;
    $.get(spriteUrl)
    .done(data => this.setState({sprite: `http://pokeapi.co/${data.image}`}));
  }
  
  render() {
    return (
      <CardContent
        pokemon={this.state.pokemon}
        sprite={this.state.sprite} />
    );
  }
}

class CardContent extends React.Component {
  render() {
    const pokemon = this.props.pokemon
    return (
      <div className="pokemon-card">
        <div className="header">
          <h2>{pokemon.name}</h2>
          <div>{pokemon.hp}HP</div>
        </div>
        <div className="pokemon-image">
          <img src={this.props.sprite}
               alt={pokemon.name} />
        </div>
        <div className="pokemon-info">
          Weight: {convertHectogramsToPounds(pokemon.weight)} lbs.
        </div>
        <div className="main-content">
          <div className="national-id">
            <h3>{pokemon.national_id}</h3>
            <p>National ID</p>
          </div>
          <div className="pokemon-abilities">
            <div>Attack: {pokemon.attack}</div>
            <div>Defense: {pokemon.defense}</div>
            <div>Speed: {pokemon.speed}</div>
          </div>
        </div>
      </div>
    );
  }
}

class App extends React.Component {
  constructor(props) {
    super(props);
    this.generateCards = this.generateCards.bind(this);
    const pokemon = randomNumbers(1, 151).slice(0, 10);
    this.state = {pokemonIds: pokemon};
  }
  
  generateCards() {
    const pokemon = randomNumbers(1, 151).slice(0, 10);
    this.setState({pokemonIds: pokemon});
  }
  
  render() {
    return (
      <div>
        <div className="app-header">
          <button
            onClick={this.generateCards}
            className="random-card-btn">
            Generate Random Cards
          </button>
          <Pokeball />
        </div>
        <CardsContainer pokemonIds={this.state.pokemonIds} />
      </div>
    );
  }
}

class Pokeball extends React.Component {
  render() {
    return (
      <div className="pokeball">
        <div className="button">
          <div className="button-inner"></div>
        </div>
      </div>
    );
  }
}

class CardsContainer extends React.Component {
  render() {
    const cards = this.props.pokemonIds.map(pokeId => {
      return <PokemonCard pokeId={pokeId} key={pokeId} />;
    });
    return (
      <div className="card-container">
        {cards}
      </div>
    );
  }
}

ReactDOM.render(<App />, document.getElementById('container'));
  </script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
</body>
</html>
